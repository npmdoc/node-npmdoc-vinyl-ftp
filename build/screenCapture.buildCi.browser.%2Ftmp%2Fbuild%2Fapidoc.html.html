<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/morris/vinyl-ftp#readme">vinyl-ftp (v0.6.0)</a>
</h1>
<h4>Vinyl adapter for FTP</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp">module vinyl-ftp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.vinyl-ftp">
            function <span class="apidocSignatureSpan"></span>vinyl-ftp
            <span class="apidocSignatureSpan">( config )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.create">
            function <span class="apidocSignatureSpan">vinyl-ftp.</span>create
            <span class="apidocSignatureSpan">( config )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index">
            function <span class="apidocSignatureSpan">vinyl-ftp.</span>index
            <span class="apidocSignatureSpan">( config )</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-ftp.</span>filter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-ftp.</span>ftp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-ftp.</span>helpers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-ftp.</span>index.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-ftp.</span>mode</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.filter">module vinyl-ftp.filter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.filter.filter">
            function <span class="apidocSignatureSpan">vinyl-ftp.</span>filter
            <span class="apidocSignatureSpan">( folder, filter, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.filter.differentSize">
            function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>differentSize
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.filter.newer">
            function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>newer
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.filter.newerOrDifferentSize">
            function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>newerOrDifferentSize
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.ftp">module vinyl-ftp.ftp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.acquire">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>acquire
            <span class="apidocSignatureSpan">( cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.chmod">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>chmod
            <span class="apidocSignatureSpan">( path, mode, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.downbuffer">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>downbuffer
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.downstream">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>downstream
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.list">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>list
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.mkdirp">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mkdirp
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.mlsd">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mlsd
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.mlsdOrList">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mlsdOrList
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.pushIdle">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>pushIdle
            <span class="apidocSignatureSpan">( ftp )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.release">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>release
            <span class="apidocSignatureSpan">( ftp, force )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.reload">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>reload
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.remote">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>remote
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.upload">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>upload
            <span class="apidocSignatureSpan">( file, path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.ftp.vinylFiles">
            function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>vinylFiles
            <span class="apidocSignatureSpan">( dirname, files )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.helpers">module vinyl-ftp.helpers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.fixDate">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>fixDate
            <span class="apidocSignatureSpan">( date )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.isDirectory">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>isDirectory
            <span class="apidocSignatureSpan">( vf )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.join">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>join
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.log">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>log
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.makeOptions">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>makeOptions
            <span class="apidocSignatureSpan">( options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.normalize">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>normalize
            <span class="apidocSignatureSpan">( path )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.helpers.parallel">
            function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>parallel
            <span class="apidocSignatureSpan">( transform, options )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.index">module vinyl-ftp.index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.index">
            function <span class="apidocSignatureSpan">vinyl-ftp.</span>index
            <span class="apidocSignatureSpan">( config )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.create">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.</span>create
            <span class="apidocSignatureSpan">( config )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.index.prototype">module vinyl-ftp.index.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.acquire">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>acquire
            <span class="apidocSignatureSpan">( cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.chmod">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>chmod
            <span class="apidocSignatureSpan">( path, mode, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.clean">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>clean
            <span class="apidocSignatureSpan">( globs, local, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.delete">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>delete
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.dest">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>dest
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.differentSize">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>differentSize
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.downbuffer">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>downbuffer
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.downstream">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>downstream
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.filter">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>filter
            <span class="apidocSignatureSpan">( folder, filter, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.fixDate">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>fixDate
            <span class="apidocSignatureSpan">( date )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.glob">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>glob
            <span class="apidocSignatureSpan">( globs, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.isDirectory">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>isDirectory
            <span class="apidocSignatureSpan">( vf )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.join">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>join
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.list">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>list
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.log">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>log
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.makeOptions">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>makeOptions
            <span class="apidocSignatureSpan">( options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.mkdirp">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mkdirp
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.mlsd">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mlsd
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.mlsdOrList">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mlsdOrList
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.mode">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mode
            <span class="apidocSignatureSpan">( folder, mode, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.newer">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>newer
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.newerOrDifferentSize">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>newerOrDifferentSize
            <span class="apidocSignatureSpan">( folder, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.normalize">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>normalize
            <span class="apidocSignatureSpan">( path )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.parallel">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>parallel
            <span class="apidocSignatureSpan">( transform, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.pushIdle">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>pushIdle
            <span class="apidocSignatureSpan">( ftp )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.release">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>release
            <span class="apidocSignatureSpan">( ftp, force )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.reload">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>reload
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.remote">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>remote
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.rmdir">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>rmdir
            <span class="apidocSignatureSpan">( path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.src">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>src
            <span class="apidocSignatureSpan">( globs, options )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.upload">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>upload
            <span class="apidocSignatureSpan">( file, path, cb )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.index.prototype.vinylFiles">
            function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>vinylFiles
            <span class="apidocSignatureSpan">( dirname, files )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-ftp.mode">module vinyl-ftp.mode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-ftp.mode.mode">
            function <span class="apidocSignatureSpan">vinyl-ftp.</span>mode
            <span class="apidocSignatureSpan">( folder, mode, options )</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp" id="apidoc.module.vinyl-ftp">module vinyl-ftp</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.vinyl-ftp" id="apidoc.element.vinyl-ftp.vinyl-ftp">
        function <span class="apidocSignatureSpan"></span>vinyl-ftp
        <span class="apidocSignatureSpan">( config )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function VinylFtp( config ) {

	if ( !( this instanceof VinylFtp ) ) return new VinylFtp( config );

	this.config = assign( {
		parallel:       3,
		maxConnections: config.parallel || 5,
		log:            null,
		timeOffset:     0,
		idleTimeout:    100,
		password:       config.password || config.pass,
		reload:         false
	}, config );

	// connection pool
	this.queue = [];
	this.connectionCount = 0;
	this.idle = [];
	this.idleTimer = null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.create" id="apidoc.element.vinyl-ftp.create">
        function <span class="apidocSignatureSpan">vinyl-ftp.</span>create
        <span class="apidocSignatureSpan">( config )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function ( config ) {

	return new VinylFtp( config );

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var gulp = require( 'gulp' );
var gutil = require( 'gulp-util' );
var ftp = require( 'vinyl-ftp' );

gulp.task( 'deploy', function () {

	var conn = ftp.<span class="apidocCodeKeywordSpan">create</span>( {
		host:     'mywebsite.tld',
		user:     'me',
		password: 'mypass',
		parallel: 10,
		log:      gutil.log
	} );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index" id="apidoc.element.vinyl-ftp.index">
        function <span class="apidocSignatureSpan">vinyl-ftp.</span>index
        <span class="apidocSignatureSpan">( config )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function VinylFtp( config ) {

	if ( !( this instanceof VinylFtp ) ) return new VinylFtp( config );

	this.config = assign( {
		parallel:       3,
		maxConnections: config.parallel || 5,
		log:            null,
		timeOffset:     0,
		idleTimeout:    100,
		password:       config.password || config.pass,
		reload:         false
	}, config );

	// connection pool
	this.queue = [];
	this.connectionCount = 0;
	this.idle = [];
	this.idleTimer = null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.filter" id="apidoc.module.vinyl-ftp.filter">module vinyl-ftp.filter</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.filter.filter" id="apidoc.element.vinyl-ftp.filter.filter">
        function <span class="apidocSignatureSpan">vinyl-ftp.</span>filter
        <span class="apidocSignatureSpan">( folder, filter, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function ( folder, filter, options ) {

		options = this.makeOptions( options );
		var self = this;

		return this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );

			self.remote( path, onRemote );

			function onRemote( err, remote ) {

				if ( err ) return cb( err );
				filter( file, remote, onFilter );

			}

			function onFilter( err, emit ) {

				cb( err, emit ? file : null );

			}

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.newerOrDifferentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

See above.

### conn.<span class="apidocCodeKeywordSpan">filter</span>( remoteFolder, filter[, options] ) &lt;small&gt;STREAM&lt;/small
&gt;

Returns a transform stream that filters the input using a callback.
The callback should be of this form:

```javascript
function ( localFile, remoteFile, callback ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.filter.differentSize" id="apidoc.element.vinyl-ftp.filter.differentSize">
        function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>differentSize
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">differentSize = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.size !== remote.ftp.size );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
`mode` must be a string between '0000' and '0777'.

### conn.newer( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
which are newer than their remote counterpart.

### conn.<span class="apidocCodeKeywordSpan">differentSize</span>( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small
&gt;

Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.newerOrDifferentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

See above.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.filter.newer" id="apidoc.element.vinyl-ftp.filter.newer">
        function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>newer
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newer = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.mtime &gt; remote.ftp.date );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		'index.html'
	];

	// using base = '.' will transfer everything to /public_html correctly
	// turn off buffering in gulp.src for best performance

	return gulp.src( globs, { base: '.', buffer: false } )
		.pipe( conn.<span class="apidocCodeKeywordSpan">newer</span>( '/public_html' ) ) // only upload newer files
		.pipe( conn.dest( '/public_html' ) );

} );
```

Without Gulp:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.filter.newerOrDifferentSize" id="apidoc.element.vinyl-ftp.filter.newerOrDifferentSize">
        function <span class="apidocSignatureSpan">vinyl-ftp.filter.</span>newerOrDifferentSize
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newerOrDifferentSize = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.mtime &gt; remote.ftp.date || file.stat.size !== remote.ftp.size );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
which are newer than their remote counterpart.

### conn.differentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.<span class="apidocCodeKeywordSpan">newerOrDifferentSize</span>( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;
;/small&gt;

See above.

### conn.filter( remoteFolder, filter[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream that filters the input using a callback.
The callback should be of this form:
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.ftp" id="apidoc.module.vinyl-ftp.ftp">module vinyl-ftp.ftp</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.acquire" id="apidoc.element.vinyl-ftp.ftp.acquire">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>acquire
        <span class="apidocSignatureSpan">( cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acquire = function ( cb ) {

		if ( this.idle.length &gt; 0 ) {

			cb( null, this.idle.shift() );

		} else if ( this.connectionCount &lt; this.config.maxConnections ) {

			this.log( 'CONN ' );

			var self = this;
			var ftp = new Ftp();
			var called = false;
			++this.connectionCount;

			ftp.on( 'ready', function () {

				self.log( 'READY' );
				called = true;
				cb( null, ftp );

			} );

			ftp.on( 'error', function ( err ) {

				var code = err.code ? (' (' + err.code + ')') : '';
				self.log( 'ERROR', err.stack + code );
				self.release( ftp, true );

				// only enqueue callback if not called yet
				if ( !called ) {

					called = true;

					if ( self.connectionCount === 0 ) {

						// there's no hope that a working connection will be released
						// pass error
						return cb( err );

					}

					self.queue.push( cb );

				}

			} );

			ftp.connect( this.config );

		} else {

			this.queue.push( cb );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
module.exports = del;

function del( path, cb ) {

	var self = this;
	var rel;

	this.<span class="apidocCodeKeywordSpan">acquire</span>( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.log( 'DEL  ', path );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.chmod" id="apidoc.element.vinyl-ftp.ftp.chmod">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>chmod
        <span class="apidocSignatureSpan">( path, mode, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">chmod = function ( path, mode, cb ) {

		var self = this;
		path = this.join( '/', path );
		var rel;

		self.acquire( onAcquire );

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return final( err );

			self.log( 'SITE ', 'CHMOD', mode, path );
			ftp.site( 'CHMOD ' + mode + ' ' + path, final );

		}

		function final( err ) {

			self.release( rel );
			cb( err );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		options = this.makeOptions( options );
		var self = this;

		var stream = this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );
			self.<span class="apidocCodeKeywordSpan">chmod</span>( path, mode, cb );

		}, options );

		stream.resume();
		return stream;

	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.downbuffer" id="apidoc.element.vinyl-ftp.ftp.downbuffer">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>downbuffer
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">downbuffer = function ( path, cb ) {

		this.downstream( path, function ( err, stream ) {

			if ( err ) return cb( err );

			var bufs = [];

			stream.on( 'data', function ( data ) {

				bufs.push( data );

			} );

			stream.on( 'end', function () {

				cb( null, Buffer.concat( bufs ) );

			} );

			stream.on( 'error', function ( err ) {

				 cb( err );

			} );

		} );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	if ( !options.read ) return glob;

	function getContents( file, cb ) {

		if ( self.isDirectory( file ) ) return cb( null, file );
		if ( options.buffer ) return self.<span class="apidocCodeKeywordSpan">downbuffer</span>( file.path, onContents );
		self.downstream( file.path, onContents );

		function onContents( err, contents ) {

			if ( err ) return cb( err );
			file.contents = contents;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.downstream" id="apidoc.element.vinyl-ftp.ftp.downstream">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>downstream
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">downstream = function ( path, cb ) {

		var self = this;
		var remote, rel;

		this.remote( path, onRemote );

		function onRemote( err, rem ) {

			if ( err ) return cb( err );
			if ( !rem ) return cb( new Error( 'No such file' ) );
			remote = rem;

			self.acquire( onAcquire );

		}

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return onStream( err );

			self.log( 'GET  ', path );
			ftp.get( path, onStream );

		}

		function onStream( err, stream ) {

			if ( err ) {

				self.release( rel );
				return cb( err );

			}

			stream.on( 'end', function () {

				self.release( rel );

			} );

			stream.on( 'error', function () {

				self.release( rel, true );

			} );

			var bytes = 0;
			var size = remote.ftp.size;

			stream.on( 'data', function ( chunk ) {

				bytes += chunk.length;

				var progress = Math.floor( bytes / size * 100 ).toString();
				if ( progress.length === 1 ) progress = '  ' + progress;
				if ( progress.length === 2 ) progress = ' ' + progress;

				self.log( 'DOWN ', progress + '% ' + path );

			} );

			// the socket stream returned by the ftp client cannot be paused
			// add intermediate passthrough stream so piped streams get data
			stream = stream.pipe( new Stream.PassThrough() );

			cb( null, stream );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		}

	},

	downbuffer: function ( path, cb ) {

		this.<span class="apidocCodeKeywordSpan">downstream</span>( path, function ( err, stream ) {

			if ( err ) return cb( err );

			var bufs = [];

			stream.on( 'data', function ( data ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.list" id="apidoc.element.vinyl-ftp.ftp.list">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>list
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function ( path, cb ) {

		if ( !this._list ) {

			var self = this;

			this._list = new Cache( function ( path, cb ) {

				var rel;

				self.acquire( onAcquire );

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'LIST ', path );
					ftp.list( path, onFiles );

				}

				function onFiles( err, files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 550 || err.code === 450 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.vinylFiles( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );

				}

			} );

		}

		path = this.join( '/', path );
		this._list.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	},

	mlsdOrList: function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.<span class="apidocCodeKeywordSpan">list</span>( path, cb );

		setImmediate(function() {
			self.mlsd( path, onMlsd );
		});

		function onMlsd( err, files ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.mkdirp" id="apidoc.element.vinyl-ftp.ftp.mkdirp">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mkdirp
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mkdirp = function ( path, cb ) {

		if ( !this._mkdirp ) {

			var self = this;

			this._mkdirp = new Cache( function ( path, cb ) {

				// skip if path is root
				if ( path === '/' || path === '' ) {

					return final();

				}

				self.remote( path, onRemote );

				function onRemote( err, remote ) {

					if ( err ) return final( err );
					if ( remote &amp;&amp; !self.isDirectory( remote ) ) return final( new Error( path + ' is a file, cannot MKDIR' ) );
					if ( remote ) return final(); // skip if exists

					// ensure that parent directory exists
					self.mkdirp( Path.dirname( path ), onParent );

				}

				function onParent( err ) {

					if ( err ) return final( err );
					self.acquire( onAcquire );

				}

				var rel;

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'MKDIR', path );
					ftp.mkdir( path, final );

				}

				function final( err ) {

					self.release( rel );
					if ( err &amp;&amp; err.message.match( /file exists/i ) ) return cb();
					cb( err );

				}

			} );

		}

		path = this.join( '/', path );
		return this._mkdirp.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	upload: function ( file, path, cb ) {

		var self = this;
		var stream = new Stream.PassThrough();

		if ( file.isNull() ) {

			if ( file.stat &amp;&amp; file.stat.isDirectory() ) this.<span class="apidocCodeKeywordSpan">mkdirp</span>( path, cb );
			else cb( null, file );

			return;

		}

		if ( file.isStream() ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.mlsd" id="apidoc.element.vinyl-ftp.ftp.mlsd">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mlsd
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mlsd = function ( path, cb ) {

		if ( !this._mlsd ) {

			var self = this;

			this._mlsd = new Cache( function ( path, cb ) {

				var rel;

				self.acquire( onAcquire );

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'MLSD ', path );
					mlsd.bind( ftp )( path, onFiles );

				}

				function onFiles( err,  files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 501 || err.code === 550 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.vinylFiles( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );

				}

			} );

		}

		path = this.join( '/', path );
		this._mlsd.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	mlsdOrList: function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.list( path, cb );

		setImmediate(function() {
			self.<span class="apidocCodeKeywordSpan">mlsd</span>( path, onMlsd );
		});

		function onMlsd( err, files ) {

			if ( err &amp;&amp; ( err.code === 502 || err.code === 500 ) ) {

				// mlsd not implemented, fallback to LIST
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.mlsdOrList" id="apidoc.element.vinyl-ftp.ftp.mlsdOrList">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>mlsdOrList
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mlsdOrList = function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.list( path, cb );

		setImmediate(function() {
			self.mlsd( path, onMlsd );
		});

		function onMlsd( err, files ) {

			if ( err &amp;&amp; ( err.code === 502 || err.code === 500 ) ) {

				// mlsd not implemented, fallback to LIST
				return self.list( path, cb );

			} else if ( files &amp;&amp; files.length &gt; 0 &amp;&amp; !files[ 0 ].ftp.date ) {

				// mlsd didnt send any date, try LIST
				return self.list( path, cb );

			}

			cb( err, files );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	remote: function ( path, cb ) {

		var self = this;
		path = this.join( '/', path );
		var basename = Path.basename( path );
		var dirname = Path.dirname( path );

		self.<span class="apidocCodeKeywordSpan">mlsdOrList</span>( dirname, onFiles );

		function onFiles( err, files ) {

			if ( err ) return cb( err );

			for ( var i = 0; i &lt; files.length; ++i ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.pushIdle" id="apidoc.element.vinyl-ftp.ftp.pushIdle">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>pushIdle
        <span class="apidocSignatureSpan">( ftp )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pushIdle = function ( ftp ) {

		var self = this;

		// add connection to idle list
		this.idle.push( ftp );

		// reset any earlier timeout
		clearTimeout( this.idleTimer );

		// disconnect all after timeout
		this.idleTimer = setTimeout( function () {

			self.idle.forEach( function ( ftp ) {

				self.log( 'DISC ' );
				ftp.end();
				--self.connectionCount;

			} );

			self.idle = [];

		}, this.config.idleTimeout );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

			reuse = true;
			var first = this.queue.shift();
			first( null, ftp );

		} else {

			this.<span class="apidocCodeKeywordSpan">pushIdle</span>( ftp );

		}

	},

	reload: function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.release" id="apidoc.element.vinyl-ftp.ftp.release">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>release
        <span class="apidocSignatureSpan">( ftp, force )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function ( ftp, force ) {

		if ( !ftp ) return;

		if ( force ) {

			this.log( 'DISC ' );
			ftp.end();
			--this.connectionCount;

		} else if ( this.queue.length &gt; 0 ) {

			reuse = true;
			var first = this.queue.shift();
			first( null, ftp );

		} else {

			this.pushIdle( ftp );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		self.log( 'DEL  ', path );
		ftp.delete( path, final );

	}

	function final( err ) {

		self.<span class="apidocCodeKeywordSpan">release</span>( rel );
		cb( err );

	}

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.reload" id="apidoc.element.vinyl-ftp.ftp.reload">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>reload
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reload = function () {

		if ( this._mkdirp ) this._mkdirp.clear();
		if ( this._mlsd ) this._mlsd.clear();
		if ( this._list ) this._list.clear();

		return this;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		return stream;

	},

	makeOptions: function ( options ) {

		options = options || {};
		if ( options.reload ) this.<span class="apidocCodeKeywordSpan">reload</span>();
		return options;

	},

	fixDate: function ( date ) {

		if ( !date ) return null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.remote" id="apidoc.element.vinyl-ftp.ftp.remote">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>remote
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remote = function ( path, cb ) {

		var self = this;
		path = this.join( '/', path );
		var basename = Path.basename( path );
		var dirname = Path.dirname( path );

		self.mlsdOrList( dirname, onFiles );

		function onFiles( err, files ) {

			if ( err ) return cb( err );

			for ( var i = 0; i &lt; files.length; ++i ) {

				if ( files[ i ].ftp.name === basename ) return cb( null, files[ i ] );

			}

			cb();

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		options = this.makeOptions( options );
		var self = this;

		return this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );

			self.<span class="apidocCodeKeywordSpan">remote</span>( path, onRemote );

			function onRemote( err, remote ) {

				if ( err ) return cb( err );
				filter( file, remote, onFilter );

			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.upload" id="apidoc.element.vinyl-ftp.ftp.upload">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>upload
        <span class="apidocSignatureSpan">( file, path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">upload = function ( file, path, cb ) {

		var self = this;
		var stream = new Stream.PassThrough();

		if ( file.isNull() ) {

			if ( file.stat &amp;&amp; file.stat.isDirectory() ) this.mkdirp( path, cb );
			else cb( null, file );

			return;

		}

		if ( file.isStream() ) {
			file.contents.pipe( stream );
		} else if ( file.isBuffer() ) {
			stream.end( file.contents );
		}

		// ensure that parent directory exists
		self.mkdirp( Path.dirname( path ), onParent );

		function onParent( err ) {

			if ( err ) return final( err );
			self.acquire( onAcquire );

		}

		var rel;

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return final( err );

			self.log( 'PUT  ', path );
			ftp.put( stream, path, final );

			// THE FOLLOWING MUST BE AFTER ftp.put()
			// Somehow, if you attach a 'data' handler before
			// ftp.put, the callback of ftp.put is never called

			if ( file.stat ) {

				var uploaded = 0;
				var size = file.stat.size;

				stream.on( 'data', function ( chunk ) {

					uploaded += chunk.length;

					var progress = Math.floor( uploaded / size * 100 ).toString();
					if ( progress.length === 1 ) progress = '  ' + progress;
					if ( progress.length === 2 ) progress = ' ' + progress;

					self.log( 'UP   ', progress + '% ' + path );

				} );

			}

		}

		function final( err ) {

			self.release( rel );
			cb( err, file );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	options = this.makeOptions( options );
	var self = this;

	var stream = this.parallel( function ( file, cb ) {

		var path = self.join( '/', folder, file.relative );
		self.<span class="apidocCodeKeywordSpan">upload</span>( file, path, cb );

	}, options );

	stream.resume();
	return stream;

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.ftp.vinylFiles" id="apidoc.element.vinyl-ftp.ftp.vinylFiles">
        function <span class="apidocSignatureSpan">vinyl-ftp.ftp.</span>vinylFiles
        <span class="apidocSignatureSpan">( dirname, files )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">vinylFiles = function ( dirname, files ) {

		var self = this;

		return files.filter( function ( file ) {

			return file.name !== '.' &amp;&amp; file.name !== '..';

		} ).map( function ( file ) {

			file.date = self.fixDate( file.date );

			var vinyl = new Vinyl( {
				cwd: '/',
				path: self.join( dirname, file.name )
			} );
			vinyl.ftp = file;

			return vinyl;

		} );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

				function onFiles( err,  files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 501 || err.code === 550 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.<span class="apidocCodeKeywordSpan">vinylFiles</span>( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.helpers" id="apidoc.module.vinyl-ftp.helpers">module vinyl-ftp.helpers</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.fixDate" id="apidoc.element.vinyl-ftp.helpers.fixDate">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>fixDate
        <span class="apidocSignatureSpan">( date )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fixDate = function ( date ) {

		if ( !date ) return null;

		var offset = 0;

		if ( this.config.timeOffset ) offset += this.config.timeOffset * 60000;

		return new Date( date.valueOf() + offset );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		return files.filter( function ( file ) {

			return file.name !== '.' &amp;&amp; file.name !== '..';

		} ).map( function ( file ) {

			file.date = self.<span class="apidocCodeKeywordSpan">fixDate</span>( file.date );

			var vinyl = new Vinyl( {
				cwd: '/',
				path: self.join( dirname, file.name )
			} );
			vinyl.ftp = file;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.isDirectory" id="apidoc.element.vinyl-ftp.helpers.isDirectory">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>isDirectory
        <span class="apidocSignatureSpan">( vf )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDirectory = function ( vf ) {

		return vf.ftp.type.match( /^d|dir/i );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	function check( err, remote, stats, cb ) {

		var method;

		if ( err ) {
			if ( err.message.match( /ENOENT/ ) ) {
				if ( self.<span class="apidocCodeKeywordSpan">isDirectory</span>( remote ) ) {
					method = 'rmdir';
				} else {
					method = 'delete';
				}
			} else {
				return cb( err );
			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.join" id="apidoc.element.vinyl-ftp.helpers.join">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>join
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function () {

		return Path.join.apply( Path, arguments ).replace( RE_BS, '/' );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	options = this.makeOptions( options );
	var self = this;

	var glob = this.glob( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.<span class="apidocCodeKeywordSpan">join</span>( local, remote.relative ), function ( err, stats ) {
			check( err, remote, stats, cb );
		} );

	}

	function check( err, remote, stats, cb ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.log" id="apidoc.element.vinyl-ftp.helpers.log">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>log
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function () {

		var log = this.config.log;

		if ( typeof log === 'function' ) log.apply( undefined, arguments );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this.acquire( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.<span class="apidocCodeKeywordSpan">log</span>( 'DEL  ', path );
		ftp.delete( path, final );

	}

	function final( err ) {

		self.release( rel );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.makeOptions" id="apidoc.element.vinyl-ftp.helpers.makeOptions">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>makeOptions
        <span class="apidocSignatureSpan">( options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeOptions = function ( options ) {

		options = options || {};
		if ( options.reload ) this.reload();
		return options;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Fs = require( 'fs' );
var Path = require( 'path' );

module.exports = clean;

function clean( globs, local, options ) {

	options = this.<span class="apidocCodeKeywordSpan">makeOptions</span>( options );
	var self = this;

	var glob = this.glob( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.join( local, remote.relative ), function ( err, stats ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.normalize" id="apidoc.element.vinyl-ftp.helpers.normalize">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>normalize
        <span class="apidocSignatureSpan">( path )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">normalize = function ( path ) {

		return Path.normalize( path ).replace( RE_BS, '/' );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		return vf.ftp.type.match( /^d|dir/i );

	},

	normalize: function ( path ) {

		return Path.<span class="apidocCodeKeywordSpan">normalize</span>( path ).replace( RE_BS, '/' );

	},

	join: function () {

		return Path.join.apply( Path, arguments ).replace( RE_BS, '/' );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.helpers.parallel" id="apidoc.element.vinyl-ftp.helpers.parallel">
        function <span class="apidocSignatureSpan">vinyl-ftp.helpers.</span>parallel
        <span class="apidocSignatureSpan">( transform, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parallel = function ( transform, options ) {

		options = assign( {}, this.config, options );
		var p = Math.max( 1, parseInt( options.parallel ) );
		var stream = parallel( p, transform );

		return stream;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if ( method ) {
			self[ method ]( remote.path, cb );
		} else {
			cb();
		}
	}

	return glob.pipe( this.<span class="apidocCodeKeywordSpan">parallel</span>( stat, options ) );

}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.index" id="apidoc.module.vinyl-ftp.index">module vinyl-ftp.index</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.index" id="apidoc.element.vinyl-ftp.index.index">
        function <span class="apidocSignatureSpan">vinyl-ftp.</span>index
        <span class="apidocSignatureSpan">( config )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function VinylFtp( config ) {

	if ( !( this instanceof VinylFtp ) ) return new VinylFtp( config );

	this.config = assign( {
		parallel:       3,
		maxConnections: config.parallel || 5,
		log:            null,
		timeOffset:     0,
		idleTimeout:    100,
		password:       config.password || config.pass,
		reload:         false
	}, config );

	// connection pool
	this.queue = [];
	this.connectionCount = 0;
	this.idle = [];
	this.idleTimer = null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.create" id="apidoc.element.vinyl-ftp.index.create">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.</span>create
        <span class="apidocSignatureSpan">( config )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function ( config ) {

	return new VinylFtp( config );

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var gulp = require( 'gulp' );
var gutil = require( 'gulp-util' );
var ftp = require( 'vinyl-ftp' );

gulp.task( 'deploy', function () {

	var conn = ftp.<span class="apidocCodeKeywordSpan">create</span>( {
		host:     'mywebsite.tld',
		user:     'me',
		password: 'mypass',
		parallel: 10,
		log:      gutil.log
	} );
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.index.prototype" id="apidoc.module.vinyl-ftp.index.prototype">module vinyl-ftp.index.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.acquire" id="apidoc.element.vinyl-ftp.index.prototype.acquire">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>acquire
        <span class="apidocSignatureSpan">( cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acquire = function ( cb ) {

		if ( this.idle.length &gt; 0 ) {

			cb( null, this.idle.shift() );

		} else if ( this.connectionCount &lt; this.config.maxConnections ) {

			this.log( 'CONN ' );

			var self = this;
			var ftp = new Ftp();
			var called = false;
			++this.connectionCount;

			ftp.on( 'ready', function () {

				self.log( 'READY' );
				called = true;
				cb( null, ftp );

			} );

			ftp.on( 'error', function ( err ) {

				var code = err.code ? (' (' + err.code + ')') : '';
				self.log( 'ERROR', err.stack + code );
				self.release( ftp, true );

				// only enqueue callback if not called yet
				if ( !called ) {

					called = true;

					if ( self.connectionCount === 0 ) {

						// there's no hope that a working connection will be released
						// pass error
						return cb( err );

					}

					self.queue.push( cb );

				}

			} );

			ftp.connect( this.config );

		} else {

			this.queue.push( cb );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
module.exports = del;

function del( path, cb ) {

	var self = this;
	var rel;

	this.<span class="apidocCodeKeywordSpan">acquire</span>( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.log( 'DEL  ', path );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.chmod" id="apidoc.element.vinyl-ftp.index.prototype.chmod">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>chmod
        <span class="apidocSignatureSpan">( path, mode, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">chmod = function ( path, mode, cb ) {

		var self = this;
		path = this.join( '/', path );
		var rel;

		self.acquire( onAcquire );

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return final( err );

			self.log( 'SITE ', 'CHMOD', mode, path );
			ftp.site( 'CHMOD ' + mode + ' ' + path, final );

		}

		function final( err ) {

			self.release( rel );
			cb( err );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		options = this.makeOptions( options );
		var self = this;

		var stream = this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );
			self.<span class="apidocCodeKeywordSpan">chmod</span>( path, mode, cb );

		}, options );

		stream.resume();
		return stream;

	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.clean" id="apidoc.element.vinyl-ftp.index.prototype.clean">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>clean
        <span class="apidocSignatureSpan">( globs, local, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clean( globs, local, options ) {

	options = this.makeOptions( options );
	var self = this;

	var glob = this.glob( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.join( local, remote.relative ), function ( err, stats ) {
			check( err, remote, stats, cb );
		} );

	}

	function check( err, remote, stats, cb ) {

		var method;

		if ( err ) {
			if ( err.message.match( /ENOENT/ ) ) {
				if ( self.isDirectory( remote ) ) {
					method = 'rmdir';
				} else {
					method = 'delete';
				}
			} else {
				return cb( err );
			}
		}

		if ( method ) {
			self[ method ]( remote.path, cb );
		} else {
			cb();
		}
	}

	return glob.pipe( this.parallel( stat, options ) );

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Deletes a file.

### conn.rmdir( path, cb ) &lt;small&gt;CALLBACK&lt;/small&gt;

Removes a directory, recursively.

### conn.<span class="apidocCodeKeywordSpan">clean</span>( globs, local[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Globs remote files, tests if they are locally available at `&lt;local&gt;/&lt;remote.relative&gt;` and removes them if not
.

## Development

- Run tests with `CONFIG=test/config/yourserver.json npm test`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.delete" id="apidoc.element.vinyl-ftp.index.prototype.delete">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>delete
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function del( path, cb ) {

	var self = this;
	var rel;

	this.acquire( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.log( 'DEL  ', path );
		ftp.delete( path, final );

	}

	function final( err ) {

		self.release( rel );
		cb( err );

	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// callback is a function( error, emit )

	callback( null, emit );

}
```

### conn.<span class="apidocCodeKeywordSpan">delete</span>( path, cb ) &lt;small&gt;CALLBACK&lt;/small&gt;

Deletes a file.

### conn.rmdir( path, cb ) &lt;small&gt;CALLBACK&lt;/small&gt;

Removes a directory, recursively.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.dest" id="apidoc.element.vinyl-ftp.index.prototype.dest">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>dest
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function dest( folder, options ) {

	options = this.makeOptions( options );
	var self = this;

	var stream = this.parallel( function ( file, cb ) {

		var path = self.join( '/', folder, file.relative );
		self.upload( file, path, cb );

	}, options );

	stream.resume();
	return stream;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	];

	// using base = '.' will transfer everything to /public_html correctly
	// turn off buffering in gulp.src for best performance

	return gulp.src( globs, { base: '.', buffer: false } )
		.pipe( conn.newer( '/public_html' ) ) // only upload newer files
		.pipe( conn.<span class="apidocCodeKeywordSpan">dest</span>( '/public_html' ) );

} );
```

Without Gulp:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.differentSize" id="apidoc.element.vinyl-ftp.index.prototype.differentSize">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>differentSize
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">differentSize = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.size !== remote.ftp.size );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
`mode` must be a string between '0000' and '0777'.

### conn.newer( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
which are newer than their remote counterpart.

### conn.<span class="apidocCodeKeywordSpan">differentSize</span>( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small
&gt;

Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.newerOrDifferentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

See above.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.downbuffer" id="apidoc.element.vinyl-ftp.index.prototype.downbuffer">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>downbuffer
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">downbuffer = function ( path, cb ) {

		this.downstream( path, function ( err, stream ) {

			if ( err ) return cb( err );

			var bufs = [];

			stream.on( 'data', function ( data ) {

				bufs.push( data );

			} );

			stream.on( 'end', function () {

				cb( null, Buffer.concat( bufs ) );

			} );

			stream.on( 'error', function ( err ) {

				 cb( err );

			} );

		} );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	if ( !options.read ) return glob;

	function getContents( file, cb ) {

		if ( self.isDirectory( file ) ) return cb( null, file );
		if ( options.buffer ) return self.<span class="apidocCodeKeywordSpan">downbuffer</span>( file.path, onContents );
		self.downstream( file.path, onContents );

		function onContents( err, contents ) {

			if ( err ) return cb( err );
			file.contents = contents;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.downstream" id="apidoc.element.vinyl-ftp.index.prototype.downstream">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>downstream
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">downstream = function ( path, cb ) {

		var self = this;
		var remote, rel;

		this.remote( path, onRemote );

		function onRemote( err, rem ) {

			if ( err ) return cb( err );
			if ( !rem ) return cb( new Error( 'No such file' ) );
			remote = rem;

			self.acquire( onAcquire );

		}

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return onStream( err );

			self.log( 'GET  ', path );
			ftp.get( path, onStream );

		}

		function onStream( err, stream ) {

			if ( err ) {

				self.release( rel );
				return cb( err );

			}

			stream.on( 'end', function () {

				self.release( rel );

			} );

			stream.on( 'error', function () {

				self.release( rel, true );

			} );

			var bytes = 0;
			var size = remote.ftp.size;

			stream.on( 'data', function ( chunk ) {

				bytes += chunk.length;

				var progress = Math.floor( bytes / size * 100 ).toString();
				if ( progress.length === 1 ) progress = '  ' + progress;
				if ( progress.length === 2 ) progress = ' ' + progress;

				self.log( 'DOWN ', progress + '% ' + path );

			} );

			// the socket stream returned by the ftp client cannot be paused
			// add intermediate passthrough stream so piped streams get data
			stream = stream.pipe( new Stream.PassThrough() );

			cb( null, stream );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		}

	},

	downbuffer: function ( path, cb ) {

		this.<span class="apidocCodeKeywordSpan">downstream</span>( path, function ( err, stream ) {

			if ( err ) return cb( err );

			var bufs = [];

			stream.on( 'data', function ( data ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.filter" id="apidoc.element.vinyl-ftp.index.prototype.filter">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>filter
        <span class="apidocSignatureSpan">( folder, filter, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function ( folder, filter, options ) {

		options = this.makeOptions( options );
		var self = this;

		return this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );

			self.remote( path, onRemote );

			function onRemote( err, remote ) {

				if ( err ) return cb( err );
				filter( file, remote, onFilter );

			}

			function onFilter( err, emit ) {

				cb( err, emit ? file : null );

			}

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.newerOrDifferentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

See above.

### conn.<span class="apidocCodeKeywordSpan">filter</span>( remoteFolder, filter[, options] ) &lt;small&gt;STREAM&lt;/small
&gt;

Returns a transform stream that filters the input using a callback.
The callback should be of this form:

```javascript
function ( localFile, remoteFile, callback ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.fixDate" id="apidoc.element.vinyl-ftp.index.prototype.fixDate">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>fixDate
        <span class="apidocSignatureSpan">( date )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fixDate = function ( date ) {

		if ( !date ) return null;

		var offset = 0;

		if ( this.config.timeOffset ) offset += this.config.timeOffset * 60000;

		return new Date( date.valueOf() + offset );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		return files.filter( function ( file ) {

			return file.name !== '.' &amp;&amp; file.name !== '..';

		} ).map( function ( file ) {

			file.date = self.<span class="apidocCodeKeywordSpan">fixDate</span>( file.date );

			var vinyl = new Vinyl( {
				cwd: '/',
				path: self.join( dirname, file.name )
			} );
			vinyl.ftp = file;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.glob" id="apidoc.element.vinyl-ftp.index.prototype.glob">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>glob
        <span class="apidocSignatureSpan">( globs, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function glob( globs, options ) {

	options = this.makeOptions( options );
	if ( typeof globs === 'string' ) globs = [ globs ];

	var self = this;
	var positives = [];
	var negatives = [];
	globs.forEach( function ( glob ) {

		var mm = new Minimatch( self.join( '/', glob ), options );
		mm.base = mmBase( mm );

		if ( mm.negate ) negatives.push( mm );
		else positives.push( mm );

	} );

	var stream = new Stream.PassThrough( { objectMode: true } );
	var scanning = 0;

	// get file list and write to stream on match.
	// recursively scan on partial match.
	function scan( path, mm ) {

		++scanning;
		self.mlsdOrList( path, onList );

		function onList( err, files ) {

			if ( err ) return stream.emit( 'error', err );

			files.forEach( function ( file ) {

				if ( self.isDirectory( file ) &amp;&amp; mm.match( file.path, true ) ) {

					scan( file.path, mm );

				}

				write( file ); // do this after scan; next stream might change file.path

			} );

			--scanning;

			if ( scanning === 0 ) stream.emit( 'end' );

		}

	}

	// write file on match. check it only once.
	var seen = {};

	function write( file ) {

		if ( !seen[ file.path ] ) {

			seen[ file.path ] = true;
			if ( match( file ) ) stream.write( file );

		}

	}

	function match( file ) {

		var ok = false;
		var base;
		var i, l;

		for ( i = 0, l = positives.length; i &lt; l; ++i ) {

			if ( positives[ i ].match( file.path ) ) {

				ok = true;
				base = options.base || positives[ i ].base;
				break;

			}

		}

		if ( !ok ) return false;

		for ( i = 0, l = negatives.length; i &lt; l; ++i ) {

			if ( !negatives[ i ].match( file.path ) ) return false;

		}

		file.cwd = options.cwd || '/';
		file.base = base;
		return true;

	}

	// scan each positive glob
	positives.forEach( function ( mm ) {

		mm.set.forEach( function ( parts ) {

			scan( partsBase( parts ), mm );

		} );

	} );

	return stream;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
module.exports = clean;

function clean( globs, local, options ) {

	options = this.makeOptions( options );
	var self = this;

	var glob = this.<span class="apidocCodeKeywordSpan">glob</span>( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.join( local, remote.relative ), function ( err, stats ) {
			check( err, remote, stats, cb );
		} );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.isDirectory" id="apidoc.element.vinyl-ftp.index.prototype.isDirectory">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>isDirectory
        <span class="apidocSignatureSpan">( vf )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDirectory = function ( vf ) {

		return vf.ftp.type.match( /^d|dir/i );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	function check( err, remote, stats, cb ) {

		var method;

		if ( err ) {
			if ( err.message.match( /ENOENT/ ) ) {
				if ( self.<span class="apidocCodeKeywordSpan">isDirectory</span>( remote ) ) {
					method = 'rmdir';
				} else {
					method = 'delete';
				}
			} else {
				return cb( err );
			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.join" id="apidoc.element.vinyl-ftp.index.prototype.join">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>join
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function () {

		return Path.join.apply( Path, arguments ).replace( RE_BS, '/' );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	options = this.makeOptions( options );
	var self = this;

	var glob = this.glob( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.<span class="apidocCodeKeywordSpan">join</span>( local, remote.relative ), function ( err, stats ) {
			check( err, remote, stats, cb );
		} );

	}

	function check( err, remote, stats, cb ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.list" id="apidoc.element.vinyl-ftp.index.prototype.list">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>list
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function ( path, cb ) {

		if ( !this._list ) {

			var self = this;

			this._list = new Cache( function ( path, cb ) {

				var rel;

				self.acquire( onAcquire );

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'LIST ', path );
					ftp.list( path, onFiles );

				}

				function onFiles( err, files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 550 || err.code === 450 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.vinylFiles( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );

				}

			} );

		}

		path = this.join( '/', path );
		this._list.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	},

	mlsdOrList: function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.<span class="apidocCodeKeywordSpan">list</span>( path, cb );

		setImmediate(function() {
			self.mlsd( path, onMlsd );
		});

		function onMlsd( err, files ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.log" id="apidoc.element.vinyl-ftp.index.prototype.log">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>log
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function () {

		var log = this.config.log;

		if ( typeof log === 'function' ) log.apply( undefined, arguments );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this.acquire( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.<span class="apidocCodeKeywordSpan">log</span>( 'DEL  ', path );
		ftp.delete( path, final );

	}

	function final( err ) {

		self.release( rel );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.makeOptions" id="apidoc.element.vinyl-ftp.index.prototype.makeOptions">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>makeOptions
        <span class="apidocSignatureSpan">( options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeOptions = function ( options ) {

		options = options || {};
		if ( options.reload ) this.reload();
		return options;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Fs = require( 'fs' );
var Path = require( 'path' );

module.exports = clean;

function clean( globs, local, options ) {

	options = this.<span class="apidocCodeKeywordSpan">makeOptions</span>( options );
	var self = this;

	var glob = this.glob( globs, options );

	function stat( remote, cb ) {

		Fs.stat( Path.join( local, remote.relative ), function ( err, stats ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.mkdirp" id="apidoc.element.vinyl-ftp.index.prototype.mkdirp">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mkdirp
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mkdirp = function ( path, cb ) {

		if ( !this._mkdirp ) {

			var self = this;

			this._mkdirp = new Cache( function ( path, cb ) {

				// skip if path is root
				if ( path === '/' || path === '' ) {

					return final();

				}

				self.remote( path, onRemote );

				function onRemote( err, remote ) {

					if ( err ) return final( err );
					if ( remote &amp;&amp; !self.isDirectory( remote ) ) return final( new Error( path + ' is a file, cannot MKDIR' ) );
					if ( remote ) return final(); // skip if exists

					// ensure that parent directory exists
					self.mkdirp( Path.dirname( path ), onParent );

				}

				function onParent( err ) {

					if ( err ) return final( err );
					self.acquire( onAcquire );

				}

				var rel;

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'MKDIR', path );
					ftp.mkdir( path, final );

				}

				function final( err ) {

					self.release( rel );
					if ( err &amp;&amp; err.message.match( /file exists/i ) ) return cb();
					cb( err );

				}

			} );

		}

		path = this.join( '/', path );
		return this._mkdirp.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	upload: function ( file, path, cb ) {

		var self = this;
		var stream = new Stream.PassThrough();

		if ( file.isNull() ) {

			if ( file.stat &amp;&amp; file.stat.isDirectory() ) this.<span class="apidocCodeKeywordSpan">mkdirp</span>( path, cb );
			else cb( null, file );

			return;

		}

		if ( file.isStream() ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.mlsd" id="apidoc.element.vinyl-ftp.index.prototype.mlsd">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mlsd
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mlsd = function ( path, cb ) {

		if ( !this._mlsd ) {

			var self = this;

			this._mlsd = new Cache( function ( path, cb ) {

				var rel;

				self.acquire( onAcquire );

				function onAcquire( err, ftp ) {

					rel = ftp;
					if ( err ) return final( err );

					self.log( 'MLSD ', path );
					mlsd.bind( ftp )( path, onFiles );

				}

				function onFiles( err,  files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 501 || err.code === 550 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.vinylFiles( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );

				}

			} );

		}

		path = this.join( '/', path );
		this._mlsd.get( path, cb );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	mlsdOrList: function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.list( path, cb );

		setImmediate(function() {
			self.<span class="apidocCodeKeywordSpan">mlsd</span>( path, onMlsd );
		});

		function onMlsd( err, files ) {

			if ( err &amp;&amp; ( err.code === 502 || err.code === 500 ) ) {

				// mlsd not implemented, fallback to LIST
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.mlsdOrList" id="apidoc.element.vinyl-ftp.index.prototype.mlsdOrList">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mlsdOrList
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mlsdOrList = function ( path, cb ) {

		var self = this;

		if ( this.noMlsd ) return this.list( path, cb );

		setImmediate(function() {
			self.mlsd( path, onMlsd );
		});

		function onMlsd( err, files ) {

			if ( err &amp;&amp; ( err.code === 502 || err.code === 500 ) ) {

				// mlsd not implemented, fallback to LIST
				return self.list( path, cb );

			} else if ( files &amp;&amp; files.length &gt; 0 &amp;&amp; !files[ 0 ].ftp.date ) {

				// mlsd didnt send any date, try LIST
				return self.list( path, cb );

			}

			cb( err, files );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	remote: function ( path, cb ) {

		var self = this;
		path = this.join( '/', path );
		var basename = Path.basename( path );
		var dirname = Path.dirname( path );

		self.<span class="apidocCodeKeywordSpan">mlsdOrList</span>( dirname, onFiles );

		function onFiles( err, files ) {

			if ( err ) return cb( err );

			for ( var i = 0; i &lt; files.length; ++i ) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.mode" id="apidoc.element.vinyl-ftp.index.prototype.mode">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>mode
        <span class="apidocSignatureSpan">( folder, mode, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mode = function ( folder, mode, options ) {

		options = this.makeOptions( options );
		var self = this;

		var stream = this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );
			self.chmod( path, mode, cb );

		}, options );

		stream.resume();
		return stream;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### conn.dest( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream that transfers input files to a remote folder.
All directories are created automatically.
Passes input files through.

### conn.<span class="apidocCodeKeywordSpan">mode</span>( remoteFolder, mode[, options] ) &lt;small&gt;STREAM&lt;/small&gt;
;

Returns a transform stream that sets remote file permissions for each file.
`mode` must be a string between '0000' and '0777'.

### conn.newer( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.newer" id="apidoc.element.vinyl-ftp.index.prototype.newer">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>newer
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newer = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.mtime &gt; remote.ftp.date );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		'index.html'
	];

	// using base = '.' will transfer everything to /public_html correctly
	// turn off buffering in gulp.src for best performance

	return gulp.src( globs, { base: '.', buffer: false } )
		.pipe( conn.<span class="apidocCodeKeywordSpan">newer</span>( '/public_html' ) ) // only upload newer files
		.pipe( conn.dest( '/public_html' ) );

} );
```

Without Gulp:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.newerOrDifferentSize" id="apidoc.element.vinyl-ftp.index.prototype.newerOrDifferentSize">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>newerOrDifferentSize
        <span class="apidocSignatureSpan">( folder, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newerOrDifferentSize = function ( folder, options ) {

		options = this.makeOptions( options );
		return this.filter( folder, function ( file, remote, cb ) {

			cb( null, !remote || file.stat.mtime &gt; remote.ftp.date || file.stat.size !== remote.ftp.size );

		}, options );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
which are newer than their remote counterpart.

### conn.differentSize( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
which have a different file size than their remote counterpart.

### conn.<span class="apidocCodeKeywordSpan">newerOrDifferentSize</span>( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;
;/small&gt;

See above.

### conn.filter( remoteFolder, filter[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream that filters the input using a callback.
The callback should be of this form:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.normalize" id="apidoc.element.vinyl-ftp.index.prototype.normalize">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>normalize
        <span class="apidocSignatureSpan">( path )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">normalize = function ( path ) {

		return Path.normalize( path ).replace( RE_BS, '/' );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		return vf.ftp.type.match( /^d|dir/i );

	},

	normalize: function ( path ) {

		return Path.<span class="apidocCodeKeywordSpan">normalize</span>( path ).replace( RE_BS, '/' );

	},

	join: function () {

		return Path.join.apply( Path, arguments ).replace( RE_BS, '/' );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.parallel" id="apidoc.element.vinyl-ftp.index.prototype.parallel">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>parallel
        <span class="apidocSignatureSpan">( transform, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parallel = function ( transform, options ) {

		options = assign( {}, this.config, options );
		var p = Math.max( 1, parseInt( options.parallel ) );
		var stream = parallel( p, transform );

		return stream;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if ( method ) {
			self[ method ]( remote.path, cb );
		} else {
			cb();
		}
	}

	return glob.pipe( this.<span class="apidocCodeKeywordSpan">parallel</span>( stat, options ) );

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.pushIdle" id="apidoc.element.vinyl-ftp.index.prototype.pushIdle">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>pushIdle
        <span class="apidocSignatureSpan">( ftp )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pushIdle = function ( ftp ) {

		var self = this;

		// add connection to idle list
		this.idle.push( ftp );

		// reset any earlier timeout
		clearTimeout( this.idleTimer );

		// disconnect all after timeout
		this.idleTimer = setTimeout( function () {

			self.idle.forEach( function ( ftp ) {

				self.log( 'DISC ' );
				ftp.end();
				--self.connectionCount;

			} );

			self.idle = [];

		}, this.config.idleTimeout );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

			reuse = true;
			var first = this.queue.shift();
			first( null, ftp );

		} else {

			this.<span class="apidocCodeKeywordSpan">pushIdle</span>( ftp );

		}

	},

	reload: function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.release" id="apidoc.element.vinyl-ftp.index.prototype.release">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>release
        <span class="apidocSignatureSpan">( ftp, force )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function ( ftp, force ) {

		if ( !ftp ) return;

		if ( force ) {

			this.log( 'DISC ' );
			ftp.end();
			--this.connectionCount;

		} else if ( this.queue.length &gt; 0 ) {

			reuse = true;
			var first = this.queue.shift();
			first( null, ftp );

		} else {

			this.pushIdle( ftp );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		self.log( 'DEL  ', path );
		ftp.delete( path, final );

	}

	function final( err ) {

		self.<span class="apidocCodeKeywordSpan">release</span>( rel );
		cb( err );

	}

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.reload" id="apidoc.element.vinyl-ftp.index.prototype.reload">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>reload
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reload = function () {

		if ( this._mkdirp ) this._mkdirp.clear();
		if ( this._mlsd ) this._mlsd.clear();
		if ( this._list ) this._list.clear();

		return this;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		return stream;

	},

	makeOptions: function ( options ) {

		options = options || {};
		if ( options.reload ) this.<span class="apidocCodeKeywordSpan">reload</span>();
		return options;

	},

	fixDate: function ( date ) {

		if ( !date ) return null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.remote" id="apidoc.element.vinyl-ftp.index.prototype.remote">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>remote
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remote = function ( path, cb ) {

		var self = this;
		path = this.join( '/', path );
		var basename = Path.basename( path );
		var dirname = Path.dirname( path );

		self.mlsdOrList( dirname, onFiles );

		function onFiles( err, files ) {

			if ( err ) return cb( err );

			for ( var i = 0; i &lt; files.length; ++i ) {

				if ( files[ i ].ftp.name === basename ) return cb( null, files[ i ] );

			}

			cb();

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		options = this.makeOptions( options );
		var self = this;

		return this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );

			self.<span class="apidocCodeKeywordSpan">remote</span>( path, onRemote );

			function onRemote( err, remote ) {

				if ( err ) return cb( err );
				filter( file, remote, onFilter );

			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.rmdir" id="apidoc.element.vinyl-ftp.index.prototype.rmdir">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>rmdir
        <span class="apidocSignatureSpan">( path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rmdir( path, cb ) {

	var self = this;
	var rel;

	this.acquire( onAcquire );

	function onAcquire( err, ftp ) {

		rel = ftp;
		if ( err ) return final( err );

		self.log( 'RMDIR', path );
		ftp.rmdir( path, true, final );

	}

	function final( err ) {

		self.release( rel );
		if ( err &amp;&amp; err.message.match( /no such file/i ) ) return cb();
		cb( err );

	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
```

### conn.delete( path, cb ) &lt;small&gt;CALLBACK&lt;/small&gt;

Deletes a file.

### conn.<span class="apidocCodeKeywordSpan">rmdir</span>( path, cb ) &lt;small&gt;CALLBACK&lt;/small&gt;

Removes a directory, recursively.

### conn.clean( globs, local[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Globs remote files, tests if they are locally available at `&lt;local&gt;/&lt;remote.relative&gt;` and removes them if not
.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.src" id="apidoc.element.vinyl-ftp.index.prototype.src">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>src
        <span class="apidocSignatureSpan">( globs, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function src( globs, options ) {

	options = assign( { buffer: true, read: true }, options );
	options = this.makeOptions( options );
	var self = this;

	var glob = this.glob( globs, options );

	if ( options.since ) {

		var filterSince = through.obj( function ( file, enc, cb ) {

			if ( options.since &lt; file.ftp.date ) {

				return cb( null, file );

			}

			cb();

		} );

		glob = glob.pipe( filterSince );

	}

	if ( !options.read ) return glob;

	function getContents( file, cb ) {

		if ( self.isDirectory( file ) ) return cb( null, file );
		if ( options.buffer ) return self.downbuffer( file.path, onContents );
		self.downstream( file.path, onContents );

		function onContents( err, contents ) {

			if ( err ) return cb( err );
			file.contents = contents;

			cb( null, file );

		}

	}

	return glob.pipe( this.parallel( getContents, options ) );

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		'fonts/**',
		'index.html'
	];

	// using base = '.' will transfer everything to /public_html correctly
	// turn off buffering in gulp.src for best performance

	return gulp.<span class="apidocCodeKeywordSpan">src</span>( globs, { base: '.', buffer: false } )
		.pipe( conn.newer( '/public_html' ) ) // only upload newer files
		.pipe( conn.dest( '/public_html' ) );

} );
```

Without Gulp:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.upload" id="apidoc.element.vinyl-ftp.index.prototype.upload">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>upload
        <span class="apidocSignatureSpan">( file, path, cb )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">upload = function ( file, path, cb ) {

		var self = this;
		var stream = new Stream.PassThrough();

		if ( file.isNull() ) {

			if ( file.stat &amp;&amp; file.stat.isDirectory() ) this.mkdirp( path, cb );
			else cb( null, file );

			return;

		}

		if ( file.isStream() ) {
			file.contents.pipe( stream );
		} else if ( file.isBuffer() ) {
			stream.end( file.contents );
		}

		// ensure that parent directory exists
		self.mkdirp( Path.dirname( path ), onParent );

		function onParent( err ) {

			if ( err ) return final( err );
			self.acquire( onAcquire );

		}

		var rel;

		function onAcquire( err, ftp ) {

			rel = ftp;
			if ( err ) return final( err );

			self.log( 'PUT  ', path );
			ftp.put( stream, path, final );

			// THE FOLLOWING MUST BE AFTER ftp.put()
			// Somehow, if you attach a 'data' handler before
			// ftp.put, the callback of ftp.put is never called

			if ( file.stat ) {

				var uploaded = 0;
				var size = file.stat.size;

				stream.on( 'data', function ( chunk ) {

					uploaded += chunk.length;

					var progress = Math.floor( uploaded / size * 100 ).toString();
					if ( progress.length === 1 ) progress = '  ' + progress;
					if ( progress.length === 2 ) progress = ' ' + progress;

					self.log( 'UP   ', progress + '% ' + path );

				} );

			}

		}

		function final( err ) {

			self.release( rel );
			cb( err, file );

		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	options = this.makeOptions( options );
	var self = this;

	var stream = this.parallel( function ( file, cb ) {

		var path = self.join( '/', folder, file.relative );
		self.<span class="apidocCodeKeywordSpan">upload</span>( file, path, cb );

	}, options );

	stream.resume();
	return stream;

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-ftp.index.prototype.vinylFiles" id="apidoc.element.vinyl-ftp.index.prototype.vinylFiles">
        function <span class="apidocSignatureSpan">vinyl-ftp.index.prototype.</span>vinylFiles
        <span class="apidocSignatureSpan">( dirname, files )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">vinylFiles = function ( dirname, files ) {

		var self = this;

		return files.filter( function ( file ) {

			return file.name !== '.' &amp;&amp; file.name !== '..';

		} ).map( function ( file ) {

			file.date = self.fixDate( file.date );

			var vinyl = new Vinyl( {
				cwd: '/',
				path: self.join( dirname, file.name )
			} );
			vinyl.ftp = file;

			return vinyl;

		} );

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

				function onFiles( err,  files ) {

					// no such file or directory
					if ( err &amp;&amp; ( err.code === 501 || err.code === 550 ) ) return final( null, [] );
					if ( err ) return final( err );

					final( null, self.<span class="apidocCodeKeywordSpan">vinylFiles</span>( path, files ) );

				}

				function final( err, files ) {

					self.release( rel );
					cb( err, files );
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-ftp.mode" id="apidoc.module.vinyl-ftp.mode">module vinyl-ftp.mode</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-ftp.mode.mode" id="apidoc.element.vinyl-ftp.mode.mode">
        function <span class="apidocSignatureSpan">vinyl-ftp.</span>mode
        <span class="apidocSignatureSpan">( folder, mode, options )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mode = function ( folder, mode, options ) {

		options = this.makeOptions( options );
		var self = this;

		var stream = this.parallel( function ( file, cb ) {

			var path = self.join( '/', folder, file.relative );
			self.chmod( path, mode, cb );

		}, options );

		stream.resume();
		return stream;

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### conn.dest( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream that transfers input files to a remote folder.
All directories are created automatically.
Passes input files through.

### conn.<span class="apidocCodeKeywordSpan">mode</span>( remoteFolder, mode[, options] ) &lt;small&gt;STREAM&lt;/small&gt;
;

Returns a transform stream that sets remote file permissions for each file.
`mode` must be a string between '0000' and '0777'.

### conn.newer( remoteFolder[, options] ) &lt;small&gt;STREAM&lt;/small&gt;

Returns a transform stream which filters the input for files
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>